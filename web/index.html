<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XP Tutorial</title>
    <script>
        var callback = null;
        var Module = {
            onRuntimeInitialized: function() {
                FS.mkdir('/cache');
                FS.mount(IDBFS, {}, '/cache');

                FS.syncfs(true, function (err) {
                    var x = Module.createInstance();
                    x.get_repos_for_user_name("aosp", new Module.JSGetReposCb({
                        on_error: function (error) {
                            console.error(error)
                        },
                        on_success: function (repos, u) {
                            console.log('Got user with name: ' + u.login);
                            for (var i = 0; i < repos.size(); i++) {
                                console.log('Got repo with name: ' + repos.get(i).name);
                            }
                            FS.syncfs(function (err) {
                                if (err) {
                                    console.log("error syncing", err);
                                }
                            });
                        }
                    }));
                });

            }
        };

    </script>
    <script src="xptuto-web.js"></script>
</head>
<body>

</body>
</html>